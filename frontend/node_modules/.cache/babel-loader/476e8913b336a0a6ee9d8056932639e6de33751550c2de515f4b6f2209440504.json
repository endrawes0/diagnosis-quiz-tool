{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import styles from'../styles/QuizPlayer.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Timer=_ref=>{let{initialTime=60,onTimeUp,isRunning=true,onTick,warningThreshold=10,untimed=false}=_ref;const[timeLeft,setTimeLeft]=useState(untimed?0:initialTime);const[isWarning,setIsWarning]=useState(false);useEffect(()=>{setTimeLeft(untimed?0:initialTime);setIsWarning(false);},[initialTime,untimed]);useEffect(()=>{if(!isRunning){return;}// In untimed mode, never call onTimeUp and count up instead of down\nif(untimed){const timer=setInterval(()=>{setTimeLeft(prevTime=>{const newTime=prevTime+1;if(onTick){onTick(newTime);}return newTime;});},1000);return()=>clearInterval(timer);}// Timed mode: count down\nif(timeLeft<=0){if(onTimeUp){onTimeUp();}return;}const timer=setInterval(()=>{setTimeLeft(prevTime=>{const newTime=prevTime-1;if(onTick){onTick(newTime);}if(newTime<=warningThreshold&&newTime>0){setIsWarning(true);}if(newTime<=0){if(onTimeUp){onTimeUp();}return 0;}return newTime;});},1000);return()=>clearInterval(timer);},[isRunning,timeLeft,onTimeUp,onTick,warningThreshold,untimed]);const formatTime=useCallback(seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins,\":\").concat(secs.toString().padStart(2,'0'));},[]);const getTimerClass=()=>{if(!isRunning)return styles.timerPaused;if(!untimed&&timeLeft<=warningThreshold)return styles.timerWarning;return styles.timerNormal;};return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.timer,\" \").concat(getTimerClass()),children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.timerDisplay,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",className:styles.timerIcon,children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"12 6 12 12 16 14\"})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.timerLabel,children:untimed?'Elapsed:':'Time Left:'}),/*#__PURE__*/_jsx(\"span\",{className:styles.timerText,children:formatTime(timeLeft)})]}),isWarning&&!untimed&&/*#__PURE__*/_jsx(\"div\",{className:styles.timerWarningText,children:\"Time running out!\"})]});};export default Timer;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styles","jsx","_jsx","jsxs","_jsxs","Timer","_ref","initialTime","onTimeUp","isRunning","onTick","warningThreshold","untimed","timeLeft","setTimeLeft","isWarning","setIsWarning","timer","setInterval","prevTime","newTime","clearInterval","formatTime","seconds","mins","Math","floor","secs","concat","toString","padStart","getTimerClass","timerPaused","timerWarning","timerNormal","className","children","timerDisplay","width","height","viewBox","fill","stroke","strokeWidth","timerIcon","cx","cy","r","points","timerLabel","timerText","timerWarningText"],"sources":["/home/endrawes/diagnosis_quiz_tool/frontend/src/components/Timer.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport styles from '../styles/QuizPlayer.module.css';\n\nconst Timer = ({\n  initialTime = 60,\n  onTimeUp,\n  isRunning = true,\n  onTick,\n  warningThreshold = 10,\n  untimed = false\n}) => {\n  const [timeLeft, setTimeLeft] = useState(untimed ? 0 : initialTime);\n  const [isWarning, setIsWarning] = useState(false);\n\n  useEffect(() => {\n    setTimeLeft(untimed ? 0 : initialTime);\n    setIsWarning(false);\n  }, [initialTime, untimed]);\n\n  useEffect(() => {\n    if (!isRunning) {\n      return;\n    }\n\n    // In untimed mode, never call onTimeUp and count up instead of down\n    if (untimed) {\n      const timer = setInterval(() => {\n        setTimeLeft((prevTime) => {\n          const newTime = prevTime + 1;\n\n          if (onTick) {\n            onTick(newTime);\n          }\n\n          return newTime;\n        });\n      }, 1000);\n\n      return () => clearInterval(timer);\n    }\n\n    // Timed mode: count down\n    if (timeLeft <= 0) {\n      if (onTimeUp) {\n        onTimeUp();\n      }\n      return;\n    }\n\n    const timer = setInterval(() => {\n      setTimeLeft((prevTime) => {\n        const newTime = prevTime - 1;\n\n        if (onTick) {\n          onTick(newTime);\n        }\n\n        if (newTime <= warningThreshold && newTime > 0) {\n          setIsWarning(true);\n        }\n\n        if (newTime <= 0) {\n          if (onTimeUp) {\n            onTimeUp();\n          }\n          return 0;\n        }\n\n        return newTime;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [isRunning, timeLeft, onTimeUp, onTick, warningThreshold, untimed]);\n\n  const formatTime = useCallback((seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  }, []);\n\n  const getTimerClass = () => {\n    if (!isRunning) return styles.timerPaused;\n    if (!untimed && timeLeft <= warningThreshold) return styles.timerWarning;\n    return styles.timerNormal;\n  };\n\n  return (\n    <div className={`${styles.timer} ${getTimerClass()}`}>\n      <div className={styles.timerDisplay}>\n        <svg\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          className={styles.timerIcon}\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <polyline points=\"12 6 12 12 16 14\"></polyline>\n        </svg>\n        <span className={styles.timerLabel}>\n          {untimed ? 'Elapsed:' : 'Time Left:'}\n        </span>\n        <span className={styles.timerText}>{formatTime(timeLeft)}</span>\n      </div>\n      {isWarning && !untimed && (\n        <div className={styles.timerWarningText}>\n          Time running out!\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Timer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}